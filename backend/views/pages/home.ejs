<div id="main">
    <div class="part_outside_left_1">
        <div class="side_by_side" style="background: linear-gradient(whitesmoke 0%,whitesmoke 85% ,rgb(212, 211, 211) 95% ) ">
            
            <div>
                <div id="title-main"">
                    Lorem ipsum
                </div>

                <div id="text-main"> 
                    Lorem ipsum dolor sit, amet consectetur adipisicing elit. Est ipsa beatae eveniet dolores quaerat repellat nostrum perspiciatis,
                    recusandae voluptates quod pariatur odit tempora sunt incidunt eaque, sit obcaecati! Illo, dicta?
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. 
                </br>
                    In, exercitationem incidunt nostrum enim sequi cupiditate
                    voluptates magni consequatur voluptatum quas accusamus excepturi laborum accusantium dolorum corporis, assumenda eveniet nesciunt perferendis.
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat officiis quia, 
                    distinctio neque hic laudantium fuga magnam itaque culpa aut illum amet dignissimos ad nulla aspernatur soluta maiores alias tenetur.
                </div>

            </div>
            <img src="/images/compta8CROP.png" id="front_images">
        </div>
    </div>






    
    <div class="part_outside_left_2">
        <div class="side_by_side" style="background: linear-gradient(rgb(212, 211, 211) 0%,rgb(212, 211, 211) 90% ,rgb(201, 199, 199) 95% ) ">
            <img src="/images/compta3_crop.png" id="front_images">
            <div>
                <div id="title-main"">
                    Lorem ipsum
                </div>

                <div id="text-main"> 
                    Lorem ipsum dolor sit, amet consectetur adipisicing elit. Est ipsa beatae eveniet dolores quaerat repellat nostrum perspiciatis,
                    recusandae voluptates quod pariatur odit tempora sunt incidunt eaque, sit obcaecati! Illo, dicta?
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. 
                </br>
                    In, exercitationem incidunt nostrum enim sequi cupiditate
                    voluptates magni consequatur voluptatum quas accusamus excepturi laborum accusantium dolorum corporis, assumenda eveniet nesciunt perferendis.
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat officiis quia, 
                    distinctio neque hic laudantium fuga magnam itaque culpa aut illum amet dignissimos ad nulla aspernatur soluta maiores alias tenetur.
                </div>

            </div>

        </div>
    </div>

    <div class="part_outside_left_3">
        <div class="side_by_side" style="background: rgb(201, 199, 199); ">
            
            <div>
                <div id="title-main"">
                    Lorem ipsum
                </div>

                <div id="text-main"> 
                    Lorem ipsum dolor sit, amet consectetur adipisicing elit. Est ipsa beatae eveniet dolores quaerat repellat nostrum perspiciatis,
                    recusandae voluptates quod pariatur odit tempora sunt incidunt eaque, sit obcaecati! Illo, dicta?
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. 
                </br>
                    In, exercitationem incidunt nostrum enim sequi cupiditate
                    voluptates magni consequatur voluptatum quas accusamus excepturi laborum accusantium dolorum corporis, assumenda eveniet nesciunt perferendis.
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat officiis quia, 
                    distinctio neque hic laudantium fuga magnam itaque culpa aut illum amet dignissimos ad nulla aspernatur soluta maiores alias tenetur.
                </div>

            </div>
            <img src="/images/compta4.png" id="front_images">
        </div>
    </div>

    <svg src="images/wave.svg" viewBox="0 0 1440 320" style="background-color: rgb(222, 222, 222);">
        <path fill="rgb(201, 199, 199)" fill-opacity="1" d="M0,192L30,208C60,224,120,256,180,245.3C240,235,300,181,360,181.3C420,181,480,235,540,240C600,245,660,203,720,202.7C780,203,840,245,900,261.3C960,277,1020,267,1080,245.3C1140,224,1200,192,1260,186.7C1320,181,1380,203,1410,213.3L1440,224L1440,0L1410,0C1380,0,1320,0,1260,0C1200,0,1140,0,1080,0C1020,0,960,0,900,0C840,0,780,0,720,0C660,0,600,0,540,0C480,0,420,0,360,0C300,0,240,0,180,0C120,0,60,0,30,0L0,0Z"></path>
      </svg>

<div id="comments_main" style="background-color: rgb(222, 222, 222); background-clip: padding-box;">
    <div id="comments_title">  Avis de nos clients : </div>


    <div id="comments" >

        <% comments.forEach((elem)=>{ %>
            <div class="single_comment">
                <div id = "comment_text">
                    " <%= elem.comment%> "
                </div>
                <div id="comment_note_username">
                    <div id = "comment_note">
                        <% for(let i = 0;i < elem.note;i++){ %>
                            <img src="/images/star_filled.png" class="star">
                        <% } %>
                        <% for(let i = 0;i < 5 - elem.note;i++){ %>
                            <img src="/images/star_empty.png" class="star">
                        <% } %>
                    </div>
                    <div id = "comment_username">
                        - <%= elem.name %> 
                    </div>
                </div>
            </div>
        <% })%>
        
    </div>

    <div id="create_comments_title"> Donnez nous votre avis !</div>

    <form action="/Home" method="POST" name="addCommentForm" id="addCommentForm" enctype="multipart/form-data" >
        <div id = "star_rating">
            <img src="/images/star_filled.png" class="star" id="star_1" onclick="new_note(this)" value="1">
            <img src="/images/star_filled.png" class="star" id="star_2" onclick="new_note(this)" value="2">
            <img src="/images/star_filled.png" class="star" id="star_3" onclick="new_note(this)" value="3">
            <img src="/images/star_filled.png" class="star" id="star_4" onclick="new_note(this)" value="4">
            <img src="/images/star_filled.png" class="star" id="star_5" onclick="new_note(this)" value="5">
        </div>
            <label for="name" >name</label>
            <input id="name" name="name" class="form-control" onkeydown="if(event.keyCode === 13) { return false; }">
            <label for="comment">comment</label>
            <textarea id="comment" name="comment" class="form-control" ></textarea>
            <input id="note" type="number" name="note" class="form-control" style="display: none;">
            <button type="submit" class="btn btn-primary">Save</button>
    </form>
    

    </div>

</div>


<script>

    const div_rating = document.getElementById("star_rating")
    const note = document.getElementById("note")
    
    function new_note(img) {
        let number = img.getAttribute("value");
        for (let i = 0; i < number ; i++){
            div_rating.children[i].src = "/images/star_filled.png";
        }
        for (let i = number; i < 5 ; i++){
            div_rating.children[i].src = "/images/star_empty.png";
        }
        note.value = number;
    }



    const form = document.getElementById('addCommentForm');
    
    form.addEventListener('submit', async (event) => {
      const nameInput = document.getElementById('name');
      const commentInput = document.getElementById('comment');
      const noteInput = document.getElementById('note');

      const name = nameInput.value.trim();
      const comment = commentInput.value.trim();
      const note = noteInput.value.trim();
      const response = await fetch('/home', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ name,comment,note }),
      });
      if (!response.ok) {
        errorMessage.textContent = 'Failed to add data';
        return;
      }
      window.location.href = '/';
    });
    </script>